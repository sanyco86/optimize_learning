#Краткая программа курса
##“Оптимизация Rails-приложений”

###Для кого этот курс
Курс подойдёт практикующим ruby/rails-разработчикам, которые уже освоились с разработкой фич и теперь хотят сделать свои проекты быстрее и эффективнее, чтобы добиться славы, профессионального и карьерного роста и получать еще больший кайф от своей работы.

###Цель
Научить участников грамотно выстраивать процесс оптимизации, управлять им и применять правильные инструменты в нужное время и в нужном месте.

###Что вы будете знать и уметь после выполнения курса
- Выстраивать стратегию оптимизации Rails-приложений: уметь определять и собирать нужные метрики, ставить обоснованные цели по производительности и достигать их
- Подойти к оптимизации любого аспекта rails-приложения, чтобы добиться результата
- Грамотно организовать вычислительный эксперимент и интерпретировать его результаты
- Понять, что надо оптимизировать, а что лучше не стоит
- Профилировать ruby и rails приложения по процессору и по памяти и анализировать результаты
- Использовать профилировщики ruby-prof, stackprof, rbspy
- Находить и устранять реальные bottleneck-и
- Применять best-practices и избегать gotchas
- Различать, находить и устранять memory leak и memory bloat
- Дружить со сборщиком мусора
- Настраивать и использовать мониторинг rails-приложений: NewRelic, SkyLight, Scout
- Настраивать production-окружение и production-like данные локально
- Бороться с гидрой N+1
- Оптимизировать ActiveRecord и понимать, когда лучше работать в обход него
- Находить и оптимизировать медленные SQL-запросы
- Эффективно работать с индексами СУБД
- Использовать кэширование по максимуму
- Оптимизировать фронтенд под современный интернет
- Понимать как HTTP 1, 2, 3 влияет на работу вашего проекта
- Понимать как браузер строит страницу, получая ответ сервера, и оптимизировать этот процесс
- Использовать Webpack bundle-analyze, code-splitting, tree-shaking для оптимизации js-сборок
- Оптимизировать свой Development Experience: прогон тестов, сборку, деплой, CI и другие open-source инструменты
- Оптимизировать настройки app-сервера, адаптировать сервера под неравномерную нагрузку

###Структура курса
В курсе 9 недель, в каждой неделе по одному вебинару на 2-2,5 часа и одному домашнему заданию.
В каждом вебинаре мы фокусируемся на одном из аспектов Rails-приложений, который можно оптимизировать. Учимся грамотно ставить численные эксперименты, профилировать, анализировать результаты профилирования, выстраивать feedback-loop для оптимизации, разбираем best-practices и gotchas, учимся защищаться от регрессий достигнутых результатов с помощью CI.
В домашнем задании вы применяете полученные знания к оптимизации заранее подготовленных проектов, чтобы удовлетворить высоким требованиям к производительности.
В течение всего курса вам нужно будет применить полученные знания к своим проектам, оформить и представить инструкторам case-study ваших успешных оптимизаций (дадим шаблон для оформления, поможем и подскажем).  На последнем занятии мы проведём обзор этих кейсов, соберём статистику, поделимся успешным опытом оптимизации друг с другом, расскажем об интересных идеях и результатах.

##План занятий
###Неделя 1. Оптимизация работы с памятью в ruby-программах
- Оптимизация: общие подходы и мантра
- Планирование эксперимента
- Общая стратегия сбора метрик, постановки целей по оптимизации Rails-приложений
- Сбор метрик и постановка целей по оптимизации памяти
- Как устроена работа с памятью в ruby
- Сборщик мусора: эволюция, современное состояние, тюнинг
- Замеры использования памяти
- Memory leak vs Memory bloat
- Профилирование использования памяти, визуализация и анализ результатов
- Возможности сброса работы с ruby на более подходящие части технологического стека
- Альтернативные аллокаторы памяти, jemalloc
- Связь оптимизации памяти c оптимизацией CPU

###Неделя 2. Оптимизация работы с CPU в ruby-программах
- Сбор метрик и постановка целей по оптимизации CPU
- Особенности организации эксперимента с использованием CPU
- Бенчмаркинг ruby-программ
- Профилирование использования CPU в ruby-коде (rubyprof, stackprof, rbspy)
- Визуализация и анализ результатов профилирования CPU
- Разновидности, идентификация и устранение Bottleneck’ов
- Возможности использования оптимизированных библиотек для нагруженных частей проекта
- Параллельные вычисления в Ruby, GIL, потоки, процессы
- Закон Амдала
- Best-practices и gotchas

###Неделя 3. Оптимизация Rails бекенда
- Сбор метрик и постановка целей по оптимизации бэкенда
- Настройка production-like данных локально - зачем и как
- Уточнение роли бэкенда в цикле запрос-ответ-взаимодействие современного веб-приложения
- Работа с rack-mini-profiler
- Настройка и использование мониторинга NewRelic, Skylight, Scout
- Кеширование!
- Вынос ресурсоемких процессов в фоновые задачи
- Resque, Sidekiq и другие
- Профилирование rails-бэкенда, нагрузочные тесты, численные эксперименты

###Неделя 4. Оптимизация ActiveRecord и работы с базой данных
- Сбор метрик и постановка целей по оптимизации работы с базой данных
- Борьба с гидрой N+1
- Определение и исправление медленных запросов
- Сокращение количества запросов
- Кэширование сложных запросов
- Работа с планировщиком запросов БД с Explain Analyze
- Эффективная работа с индексами базы данных
- Vacuum, autovacuum и чем он может быть опасен
- Импорт больших объёмов данных с ActiveRecord и в обход него
- Польза, цена и альтернативы ActiveRecord

###Неделя 5. Оптимизация фронтенда для современного интернета
- Сбор метрик и постановка целей по оптимизации фронтенда
- Формирование Performance mindset у себя и в своей компании
- Оценка стоимости вашего фронтенда
- Работа с сервисом WebPageTest
- Настройка local-production окружения
- HTTP 1, 2, 3 и как с ними жить
- Preconnect, Prefetch, Preload, Server Push
- Конкатенация ассетов, CDN rotation, CDN внешних библиотек: за и против
- Gzip, brotli, zopfli, WebP
- Server-Sent Events, Streaming шаблонов в Rails

###Неделя 6. Оптимизация фронтенда для современных браузеров
- Процесс построения браузером страницы в деталях
- Chrome Timeline как профилировщик фронтенда
- Формирование оптимального тега HEAD
- Critical CSS
- Оптимизация CSS-бандлов
- service-workers
- Работа с картинками, шрифтами
- Webpack bundle-analyzing, code-splitting, tree-shaking
- Автоматизация защиты от разбухания js-бандлов
- Интеграция инструментов контроля соблюдения бюджетов в CI
- PageSpeed Insights, Lighthouse
- Чек-листы производительного фронтенда

###Неделя 7. Оптимизация серверов приложений
- Сбор метрик и постановка целей по оптимизации серверов
- Обзор и сравнение альтернативных app-серверов для Rails
- Закон Литтла
- Расчёт оптимальных настроек серверов для вашего проекта
- Контроль потребления памяти в production
- Отлов memory bloat в production
- Оптимизация Rails как фреймворка, derailed_behcnmarks
- Оптимизация серверов под неравномерную нагрузку
- Reverse Proxy
- Минимальная защита от DDoS

###Неделя 8. Оптимизация DX (Development eXperience)
- Сбор метрик и постановка целей по оптимизации DX
- Ещё раз в важности feedback-loop для разработчика
- Оптимизация open-source инструментов
- Оптимизация скорости загрузки Rails
- Оптимизация прогона тестов
- Оптимизация деплоя
- Оптимизация пересборки
- Оптимизация CI
- Live-reload css и js

###Неделя 9. Обсуждение кейсов оптимизации в ваших проектах